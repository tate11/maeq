<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!--Cobros (Comprobante de Ingreso)-->
        <template id="eliterp_report_account_voucher_sale">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="report_code">TESO-001-CDI-V1</t>
                    <t t-set="report_title">COMPROBANTE DE INGRESO</t>
                    <t t-set="flag">0</t><!--Sin RECIBÍ CONFORME en footer-->
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="row mt32 mb32">
                                <div class="col-xs-4" t-if="doc.date">
                                    <strong>Fecha emisión:</strong>
                                    <p t-field="doc.date"/>
                                </div>
                                <div class="col-xs-4">
                                    <strong>Cliente:</strong>
                                    <p t-field="doc.partner_id.name"/>
                                </div>
                                <div class="col-xs-4">
                                    <strong>Monto:</strong>
                                    <p t-esc='"%.2f" % sum(line.amount for line in doc.lines_payment)'/>
                                </div>
                            </div>
                            <div class="row mt32 mb32">
                                <div class="col-xs-12">
                                    <strong>Concepto:</strong>
                                    <p t-field="doc.concept"/>
                                </div>
                            </div>
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th class="text-center">DOCUMENTO</th>
                                        <th class="text-center">REFERENCIA</th>
                                        <th class="text-center">FECHA COBRO</th>
                                        <th class="text-right">MONTO</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="doc.lines_payment" t-as="line">
                                        <td>
                                            <span t-field="line.type_payment"/>
                                        </td>
                                        <td>
                                            <span t-if="line.type_payment == 'bank'"
                                                  t-esc="%s - %s % (line.bank_id.name, line.check-number)"/>
                                            <span t-if="line.type_payment == 'cash'">/</span>
                                            <span t-if="line.type_payment == 'transfer'"
                                                  t-esc="'%s' % line.bank_id.name"/>
                                        </td>
                                        <td>
                                            <span t-field="line.date_due"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="line.amount"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <report
                id="eliterp_action_report_account_voucher_sale"
                model="account.voucher"
                string="Cobro"
                report_type="qweb-pdf"
                menu="False"
                name="eliterp_treasury.eliterp_report_account_voucher_sale"
                file="eliterp_treasury.eliterp_report_account_voucher_sale"
                print_report_name="'Pagos - %s' % (object.name or '/')"
                paperformat="eliterp_management.eliterp_paperformat_a4_landscape"
        />
        <!--Pagos (Comprobante de egreso)-->
        <template id="eliterp_report_account_voucher_purchase">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="report_code">TESO-002-COEG-V1</t>
                    <t t-set="report_title">COMPROBANTE DE EGRESO</t>
                    <t t-set="flag">1</t>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="row mt32 mb32">
                                <div class="col-xs-3" t-if="doc.date">
                                    <strong>Fecha emisión:</strong>
                                    <p t-field="doc.date"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.receipt_for">
                                    <strong>Pago para:</strong>
                                    <p t-field="doc.receipt_for"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.beneficiary">
                                    <strong>Beneficiario:</strong>
                                    <p t-field="doc.beneficiary"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.concept">
                                    <strong>Concepto:</strong>
                                    <p t-field="doc.concept"/>
                                </div>
                            </div>

                            <div class="row mt32 mb32">
                                <div class="col-xs-3" t-if="doc.amount_cancel">
                                    <strong>Monto:</strong>
                                    <p t-esc='"%.2f" %doc.amount_cancel'/>
                                </div>
                                <div class="col-xs-3" t-if="doc.bank_id">
                                    <strong>Banco:</strong>
                                    <p t-field="doc.bank_id.name"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.check_date">
                                    <strong>Fecha che./tra.:</strong>
                                    <p t-field="doc.check_date"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.check_number">
                                    <strong>No. cheque:</strong>
                                    <p t-field="doc.check_number"/>
                                </div>
                            </div>

                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th class="text-center">Código cuenta</th>
                                        <th class="text-center">Nombre cuenta</th>
                                        <th class="text-right">Debe</th>
                                        <th class="text-right">Haber</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="doc.move_id.line_ids" t-as="line">
                                        <td>
                                            <span t-field="line.account_id.code"/>
                                        </td>
                                        <td>
                                            <span t-field="line.account_id.name"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="line.debit"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="line.credit"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <report
                id="eliterp_action_report_account_voucher_purchase"
                model="account.voucher"
                string="Pago"
                report_type="qweb-pdf"
                menu="False"
                name="eliterp_treasury.eliterp_report_account_voucher_purchase"
                file="eliterp_treasury.eliterp_report_account_voucher_purchase"
                print_report_name="'Pago - %s' % (object.name or '/')"
                paperformat="eliterp_management.eliterp_paperformat_a4_portrait"
        />
        <!--Reposición caja chica-->
        <template id="eliterp_report_replacement_small_box">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="report_code">TESO-004-CJA-V1</t>
                    <t t-set="report_title">REPOSICIÓN DE CAJA CHICA</t>
                    <t t-set="flag">0</t>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="row mt32 mb32">
                                <div class="col-xs-4">
                                    <strong>Fecha documento:</strong>
                                    <p t-field="doc.date"/>
                                </div>
                                <div class="col-xs-4">
                                    <strong>Custodio:</strong>
                                    <p t-field="doc.custodian_id"/>
                                </div>
                                <div class="col-xs-4">
                                    <strong>Monto asignado:</strong>
                                    <p t-esc='"%.2f" %doc.amount_allocated'/>
                                </div>
                            </div>
                            <div class="row mt32 mb32">
                                <div class="col-xs-4">
                                    <strong>Período:</strong>
                                    <t t-set="period" t-value="doc._get_period(doc.lines_voucher)"/>
                                    <p t-esc="period"/>
                                </div>
                                <div class="col-xs-4" t-if="doc.residual">
                                    <strong>Saldo:</strong>
                                    <p t-esc='"%.2f" %doc.residual'/>
                                </div>
                                <div class="col-xs-4" t-if="doc.total_vouchers">
                                    <strong>Monto reposición:</strong>
                                    <p t-esc='"%.2f" %doc.total_vouchers'/>
                                </div>
                            </div>
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th class="text-center col-xs-1">Fecha</th>
                                        <th class="text-center col-xs-1">Tipo documento</th>
                                        <th class="text-center col-xs-2">No. Documento</th>
                                        <th class="text-center col-xs-3">Proveedor/Beneficiario</th>
                                        <th class="text-center col-xs-2">Concepto</th>
                                        <th class="text-center col-xs-2">Cuenta</th>
                                        <th class="text-right col-xs-1">Monto</th>
                                    </tr>
                                </thead>
                                <tbody t-if="doc.lines_voucher">
                                    <tr t-foreach="doc.lines_voucher" t-as="line">
                                        <!--Líneas de factura-->
                                        <tr t-if="line.type_voucher == 'invoice'">
                                            <t t-set="invoice" t-value="doc._get_invoice(line.id)"/>
                                            <td class="text-center">
                                                <span t-esc="line.date"/>
                                            </td>
                                            <td class="text-center">
                                                <span t-field="line.type_voucher"/>
                                            </td>
                                            <td class="text-center">
                                                <span t-field="line.name"/>
                                            </td>
                                            <td class="text-center">
                                                <span t-field="line.beneficiary"/>
                                            </td>
                                            <td class="text-center">
                                                <span t-field="line.concept"/>
                                            </td>
                                            <td class="text-center">
                                                <span t-esc="invoice[0].account_id.name"/>
                                            </td>
                                            <td class="text-right">
                                                <span t-esc='"%.2f" % invoice[0].amount_total'/>
                                            </td>
                                        </tr>
                                        <!--Líneas de vale-->
                                        <t t-foreach="line.lines_account" t-as="line_vale">
                                            <tr>
                                                <td class="text-center">
                                                    <span t-field="line_vale.voucher_small_box_id.date"/>
                                                </td>
                                                <td class="text-center">
                                                    <span t-field="line_vale.voucher_small_box_id.type_voucher"/>
                                                </td>
                                                <td class="text-center">
                                                    <span t-field="line_vale.voucher_small_box_id.name"/>
                                                </td>
                                                <td class="text-center">
                                                    <span t-field="line_vale.voucher_small_box_id.beneficiary"/>
                                                </td>
                                                <td class="text-center">
                                                    <span t-field="line_vale.voucher_small_box_id.concept"/>
                                                </td>
                                                <td class="text-center">
                                                    <span t-field="line_vale.account_id.name"/>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc='"%.2f" %line_vale.voucher_small_box_id.amount_total'/>
                                                </td>
                                            </tr>
                                        </t>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <report
                id="eliterp_action_report_replacement_small_box"
                model="eliterp.replacement.small.box"
                string="Caja chica"
                report_type="qweb-pdf"
                menu="False"
                name="eliterp_treasury.eliterp_report_replacement_small_box"
                file="eliterp_treasury.eliterp_report_replacement_small_box"
                print_report_name="'Reposición caja chica - %s' % (object.name or '/')"
                paperformat="eliterp_management.eliterp_paperformat_a4_landscape"
        />
        <!--Comprobantes caja chica-->
        <template id="eliterp_report_voucher_small_box">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="report_code">TESO-003-VDC-V1</t>
                    <t t-set="report_title">VALE DE CAJA</t>
                    <t t-set="flag">0</t>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="row mt32 mb32">
                                <div class="col-xs-2">
                                    <strong>Fecha documento:</strong>
                                    <p t-field="doc.date"/>
                                </div>
                                <div class="col-xs-2">
                                    <strong>Fecha de pago:</strong>
                                    <p t-field="doc.date"/>
                                </div>
                                <div class="col-xs-2">
                                    <strong>Monto:</strong>
                                    <p t-esc='"%.2f" %doc.amount_total'/>
                                </div>
                                <div class="col-xs-6">
                                    <strong>Beneficiario:</strong>
                                    <p t-field="doc.beneficiary"/>
                                </div>
                            </div>
                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th class="text-center col-xs-1">Concepto</th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <tr>
                                        <td class="text-center">
                                            <span t-field="doc.concept"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <report
                id="eliterp_action_report_voucher_small_box"
                model="eliterp.voucher.small.box"
                string="Comprobantes caja chica"
                report_type="qweb-pdf"
                menu="False"
                name="eliterp_treasury.eliterp_report_voucher_small_box"
                file="eliterp_treasury.eliterp_report_voucher_small_box"
                print_report_name="'Comprobantes caja chica - %s' % (object.name or '/')"
                paperformat="eliterp_management.eliterp_paperformat_a4_landscape"
        />
        <!--Solicitud de viático-->
        <template id="eliterp_report_travel_allowance_request">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="report_code">INIC-002-VTC-V1</t>
                    <t t-set="report_title">SOLICITUD DE VIÁTICO</t>
                    <t t-set="flag">0</t>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="row mt32 mb32">
                                <div class="col-xs-3" t-if="doc.application_date">
                                    <strong>Fecha de solicitud:</strong>
                                    <p t-field="doc.application_date"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.trip_date">
                                    <strong>Fecha de viaje:</strong>
                                    <p t-field="doc.trip_date"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.beneficiary">
                                    <strong>Beneficiario:</strong>
                                    <p t-field="doc.beneficiary"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.reason">
                                    <strong>Motivo:</strong>
                                    <p t-field="doc.reason"/>
                                </div>
                            </div>

                            <div class="row mt32 mb32">
                                <div class="col-xs-3" t-if="doc.destination">
                                    <strong>Destino:</strong>
                                    <p t-field="doc.destination"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.amount_total">
                                    <strong>Monto total:</strong>
                                    <p t-esc='"%.2f" %doc.amount_total'/>
                                </div>
                                <div class="col-xs-3" t-if="doc.account_analytic_id">
                                    <strong>Centro de costos:</strong>
                                    <p t-field="doc.account_analytic_id.name"/>
                                </div>
                                <div class="col-xs-3" t-if="doc.project_id">
                                    <strong>Proyecto:</strong>
                                    <p t-field="doc.project_id"/>
                                </div>
                            </div>

                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th class="text-center">Concepto</th>
                                        <th class="text-right">Valor diario</th>
                                        <th class="text-center">No. días</th>
                                        <th class="text-center">No. personas</th>
                                        <th class="text-right">Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="doc.application_lines" t-as="line">
                                        <td>
                                            <span t-field="line.viatical_concepts_id.name"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="line.daily_value"/>
                                        </td>
                                        <td>
                                            <span t-field="line.days"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="line.number_of_people"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="line.total"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <report
                id="eliterp_action_report_travel_allowance_request"
                model="eliterp.travel.allowance.request"
                string="Solicitud de viático"
                report_type="qweb-pdf"
                menu="False"
                name="eliterp_treasury.eliterp_report_travel_allowance_request"
                file="eliterp_treasury.eliterp_report_travel_allowance_request"
                print_report_name="'Solicitud de viático - %s' % (object.name or '/')"
                paperformat="eliterp_management.eliterp_paperformat_a4_portrait"
        />
        <!--Liquidaciones de viático-->
        <template id="eliterp_report_liquidation_settlement">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-set="report_code">INIC-003-LIQ-V1</t>
                    <t t-set="report_title">LIQUIDACIÓN DE VIÁTICOS</t>
                    <t t-set="flag">0</t>
                    <t t-call="web.external_layout">
                        <div class="page">
                            <div class="row mt32 mb32">
                                <div class="col-xs-4">
                                    <strong>Fecha de documento:</strong>
                                    <p t-field="doc.application_date"/>
                                </div>
                                <div class="col-xs-4" t-if="doc.travel_allowance_request_id">
                                    <strong>Solicitud:</strong>
                                    <p t-field="doc.travel_allowance_request_id.name"/>
                                </div>
                                <div class="col-xs-4">
                                    <strong>Monto total:</strong>
                                    <p t-field="doc.amount_total"/>
                                </div>
                            </div>

                            <table class="table table-condensed">
                                <thead>
                                    <tr>
                                        <th class="text-center">Fecha</th>
                                        <th class="text-center">Tipo de Documento</th>
                                        <th class="text-center">No. Documento</th>
                                        <th class="text-center">Concepto</th>
                                        <th class="text-center">Validación</th>
                                        <th class="text-right">Monto</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="doc.document_lines" t-as="line">
                                        <td>
                                            <span t-field="line.name"/>
                                        </td>
                                        <td>
                                            <span t-field="line.date"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-field="line.type_voucher"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-field="line.viatical_concepts_id"/>
                                        </td>
                                        <td class="text-center">
                                            <span t-field="line.type_validation"/>
                                        </td>
                                        <td class="text-right">
                                            <span t-field="line.amount_total"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="clearfix">
                                <div class="row">
                                    <div class="col-xs-4 pull-right">
                                        <table class="table table-condensed">
                                            <tr class="border-black">
                                                <td>
                                                    <strong>Total</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-esc="'%.2f' % sum(line['amount_total'] for line in doc.document_lines)"/>
                                                </td>
                                            </tr>
                                            <tr class="border-black" style="background: red;">
                                                <td>
                                                    <strong>Diferencia</strong>
                                                </td>
                                                <td class="text-right">
                                                    <span t-field="doc.difference"/>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>
                            </div>

                            <p t-if="doc.comment">
                                <span class="text-center" t-field="doc.comment"/>
                            </p>
                        </div>
                    </t>
                </t>
            </t>
        </template>
        <report
                id="eliterp_action_report_liquidation_settlement"
                model="eliterp.liquidation.settlement"
                string="Liquidaciones de viático"
                report_type="qweb-pdf"
                menu="False"
                name="eliterp_treasury.eliterp_report_liquidation_settlement"
                file="eliterp_treasury.eliterp_report_liquidation_settlement"
                print_report_name="'Liquidaciones de viático - %s' % (object.name or '/')"
                paperformat="eliterp_management.eliterp_paperformat_a4_landscape"
        />
    </data>
</odoo>
